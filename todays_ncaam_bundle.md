# `todays_ncaam_bundle.json` — Structure & Build Reference

This document describes how `todays_ncaam_bundle.json` is built, what guarantees it provides, and how downstream code should rely on it.

This file is generated by `list_cbb_markets.py`.

---

## Purpose

`todays_ncaam_bundle.json` is a **daily snapshot of all Kalshi NCAAM markets** (Moneyline, Spread, Total) for a single game date, grouped **per game** with:

- clear home/away teams at the game level
- stable game keys
- consistent ticker storage for ML / spread / total
- optional parsed helpers (team codes, lines) for fast lookup

It is designed to be:
- searchable
- deterministic
- safe to consume by automated trading / probing logic

---

## High-Level Build Process

1. Fetch Kalshi events for these series:
   - `KXNCAAMBGAME`   (winner / ML)
   - `KXNCAAMBSPREAD`
   - `KXNCAAMBTOTAL`

2. Extract all nested markets.

3. Filter to “today’s games” using the **YYMONDD date token embedded in tickers**  
   (e.g. `26FEB04`), *not* `close_time`.

4. Group all markets by a shared **game key** derived from the ticker.

5. Build a normalized game object containing:
   - teams
   - matchup
   - search helpers
   - ticker indexes
   - raw compact market objects

---

## Top-Level JSON Structure

```json
{
  "meta": { ... },
  "games": {
    "<game_key>": { ... }
  }
}
